# Unit 2: Virtualization systems

**Virtualization** is a technology that allows software to **simulate resources**. In a fully virtualized environment, each operating system has the illusion of residing on an individual machine with all hardware resources entirely available to it.

To achieve **hardware virtualization**, a program called **hypervisor** or **virtual machine monitor** is needed to manage the use of the hardware, each **virtual machine** is called a **guest**. The hypervisor is responsible for **creating** and **managing** the virtual machines, ensuring that each one has the necessary resources to operate.

Each of the **virtual machines** can be assigned hardware resources through different configurations. Among the resources that can be shared are: RAM, CPU, storage drives, network cards, etc. On each of these machines we can install an independent operating system and its applications. Thus, for example, when a virtualized operating system believes that it is writing to a real hard disk, it is actually writing to a file, managed by the virtual machine, that simulates said hard disk.

!!! note
    Virtualization allows multiple guest operating systems to run simultaneously on a single computer by sharing available physical resources such as the processor, memory, storage drives, and other input/output devices.

The main **advantages** of virtualization are:

- **Cost reduction** and **Energy savings**: by reducing the number of physical machines.
- **Optimization of resources**: by sharing hardware resources.
- **Isolation**: each virtual machine is isolated from the rest, so that if one fails, the rest continue to operate.
- **Flexibility**: it is possible to create, delete, move, or resize virtual machines.
- **Security**: it is possible to create a virtual machine for each service, so that if one is compromised, the rest are not affected.
- **Education**, **testing** and **development**: it is possible to create a virtual machine to test new software or configurations without affecting the rest of the system.
- **Backup and recovery**: it is possible to create snapshots of the virtual machines to recover them in case of failure.

!!! note "VPS in the cloud"
    A real use case of virtualization is the use of **virtual private servers** (_VPS_) in the cloud.
    
    In this case, a physical server is divided into several virtual servers, each with its own operating system and applications. This allows the users to have a server with the necessary resources without having to buy and maintain a physical server.

!!! note "Cloud gaming"
    Another use case of virtualization is **cloud gaming**. In this case, the game is executed on a server in the cloud, and the user interacts with it through a client that sends the user's commands to the server and receives the images generated by the game. This allows the user to play games with high hardware requirements on a device with low hardware requirements.

    Some examples of cloud gaming services are:
    
    - [NVIDIA GeForce Now](https://www.nvidia.com/en-us/geforce-now/)
    - [Xbox Game Pass Ultimate](https://www.xbox.com/en-us/xbox-game-pass/ultimate)
    - [PlayStation Plus Premium](https://www.playstation.com/en-us/ps-plus/)
    - [Amazon Luna](https://luna.amazon.com/)

## 2.1. Virtualization concepts

The most important concepts to understand what virtualization is are:

- **Host** system.
- **Guest** system.
- **Hypervisor** or _**Virtual Machine Monitor**_ (_VMM_).
- **Virtual Machine** (_VM_).
- **Container**.

- **Host** system, is the operating system of the computer in which we install our *virtualization software* and which will assign or lend certain hardware resources to the *virtual machine* that we create.

- **Guest** system, is the operating system that we install in the *virtual machine* that we have created, using our *virtualization software* and to which we have assigned certain hardware resources to operate.

- **Hypervisor** or _**Virtual Machine Monitor**_ (_VMM_), is the software responsible for creating an **abstraction layer** to communicate the real machine with the *virtual machines*. Its mission is to assign computing resources to the virtual machines as they are needed.

- **Virtual Machine** (_VM_), is an **instance** of virtualized hardware.

- **Container**, is a **lightweight** and **portable** software package that includes everything needed to run an application: code, runtime, system tools, system libraries, and settings. Containers are isolated from each other and from the host system, but they share the kernel of the host system.

<figure markdown="span">
    ![Logical diagram of full virtualization](./unit02/Logical_diagram_Full_virtualization.png){ width=90% }
    <figcaption>Logical diagram of full virtualization. @wikipedia</figcaption>
</figure>

### 2.1.1. Types of virtualization

We will study **three types** of virtualization:

- Virtualization with **native** hypervisor, _**type 1**_ or _**bare metal**_.

    The hypervisor runs directly on the computer equipment. The hypervisor itself acts as a kind of operating system oriented to manage virtual machines, gaining greater control and obtaining better performance. Mainly used in professional environments and servers.

- Virtualization with **hosted** hypervisor, _**type 2**_.

    The hypervisor software is installed on a host operating system. It offers lower performance than native hypervisors because it is affected by the host system. They are aimed at test, teaching or home environments.

- Virtualization based on **containers**.

    Also known as **operating system-level virtualization** or **application containerization** or **containerization**.

    The containers **share** the **host operating system's kernel** and are therefore **more lightweight** than virtual machines. They are used to **run applications** in an **isolated virtual environment**.
    
    The most popular containerization software is **Docker**.

### 2.1.2. Hypervisors